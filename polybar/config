; vim: ft=dosini
; go to https://github.com/jaagr/polybar
; The README contains alot of information

[colors]
black = ${xrdb:color0:#1d2021}
darkred = ${xrdb:color1:#cc241d}
darkgreen = ${xrdb:color2:#98971a}
darkyellow = ${xrdb:color3:#d79921}
darkblue = ${xrdb:color4:#458588}
darkmagenta = ${xrdb:color5:#b16286}
darkcyan = ${xrdb:color6:#689d6a}
lightgray = ${xrdb:color7:#a89984}
gray = ${xrdb:color8:#928374}
red = ${xrdb:color9:#fb4934}
green = ${xrdb:color10:#b8bb26}
yellow = ${xrdb:color11:#fabd2f}
blue = ${xrdb:color12:#83a598}
magenta = ${xrdb:color13:#d3869b}
cyan = ${xrdb:color14:#8ec07c}
white = ${xrdb:color15:#ebdbb2}
background = ${xrdb:color256:#121212}
foreground = ${xrdb:color257:#F8F8F8}

[bar/default_laptop]
monitor = eDP1
enable-ipc = true
height = 20

background = ${colors.background}
foreground = ${colors.foreground}

padding-right = 1

module-margin-left = 1
module-margin-right = 1

font-0 = JetBrainsMono Nerd Font:size=10:antialias=true;2
font-1 = Noto Sans CJK JP:size=9:antialias=true

modules-left = bspwm xwindow 
modules-right = pulseaudio ping_ms qbittorrent perc date

tray-position = right

wm-restack = bspwm

[bar/default]
monitor = DisplayPort-2
enable-ipc = true
height = 20

background = ${colors.background}
foreground = ${colors.foreground}

padding-right = 1

module-margin-left = 1
module-margin-right = 1

font-0 = JetBrainsMono Nerd Font:size=10:antialias=true;2
font-1 = Noto Sans CJK JP:size=9:antialias=true:0

modules-left = bspwm xwindow 
modules-right = pulseaudio qbittorrent notification-xkcd date

tray-position = right
; tray-padding = 0

wm-restack = bspwm

[bar/defaultext]
monitor = DVI-D-0
enable-ipc = true
height = 20

background = ${colors.background}
foreground = ${colors.foreground}

padding-right = 1

module-margin-left = 1
module-margin-right = 1

font-0 = JetBrainsMono Nerd Font:size=10:antialias=true;2
font-1 = Noto Sans CJK JP:size=9:antialias=true:0

modules-left = bspwm
modules-right = pulseaudio qbittorrent date

wm-restack = bspwm

; custom scripts

[module/qbittorrent]  
type = custom/script  
exec = ~/.scripts/polybar-qbittorrent
interval = 0.1

[module/notification-xkcd]
type = custom/script
exec = ~/.scripts/notification-xkcd.py
click-left = ~/.scripts/notification-xkcd.py read && xdg-open https://xkcd.com/
interval = 60

[module/pulseaudio]
type = custom/script
tail = true
label-foreground = ${colors.foreground}

exec = pulseaudio-control --sink-nicknames-from "device.description" --sink-nickname "alsa_output.pci-0000_0b_00.3.analog-stereo:  Speakers" listen
click-right = exec pavucontrol &
click-left = pulseaudio-control togmute
click-middle = pulseaudio-control --sink-blacklist "alsa_output.pci-0000_09_00.1.hdmi-stereo-extra2" next-sink
scroll-up = pulseaudio-control --volume-max 130 up
scroll-down = pulseaudio-control --volume-max 130 down

[module/perc]
type = custom/script
exec = ~/.scripts/bat-level

[module/mnt]
type = custom/script
exec = ~/.scripts/polybar-mnt

[module/ping_ms]
type = custom/script
exec = "ping -qc1 1.1.1.1 2>&1 | awk -F'/' 'END{ print (/^rtt/? $5" ms":"F") }'"
interval = 1

; internal

[module/xwindow]
type = internal/xwindow
label = %title:0:100:...%
format-foreground = ${colors.blue}

[module/bspwm]
type = internal/bspwm

ws-icon-0 = firefox;
ws-icon-1 = URxvt;
ws-icon-2 = vlc;嗢
ws-icon-3 = factorio;
ws-icon-4 = Steam;
ws-icon-5 = qBittorrent;
ws-icon-6 = Pavucontrol;墳
ws-icon-7 = jetbrains-studio;
ws-icon-8 = jetbrains-idea-ce;
ws-icon-9 = Dwarf_Fortress;
ws-icon-10 = Lutris;
ws-icon-11 = scrcpy;
ws-icon-12 = Microsoft Teams - Preview;
ws-icon-13 = org-tlauncher-tlauncher-rmo-Tla;
ws-icon-14 = Minecraft* 1.16.4;
ws-icon-15 = VLauncher_x64;
ws-icon-16 = vim;
ws-icon-17 = URxvt firefox;
ws-icon-18 = Microsoft Teams - Preview firef;
ws-icon-19 = Anki;﬷
ws-icon-20 = Alacritty;
ws-icon-21 = Zathura;
ws-icon-22 = mpv;
ws-icon-default = 

label-unfocused = %icon% 
label-visible = %icon% 
label-urgent = %icon%!
label-occupied = %icon%
label-occupied-foreground = ${colors.blue}

label-focused = %icon% 
label-focused-foreground = ${colors.green}
label-focused-padding = 1

label-occupied-padding = 1

label-urgent-background = ${colors.red}
label-urgent-padding = 1

label-empty = %icon%
label-empty-foreground = ${colors.lightgray}
label-empty-padding = 1

[module/date]
type = internal/date
interval = 60

date = %b %d,
time = "%I:%M%p"

format-prefix =
format-prefix-foreground = ${colors.gray}
format-underline = ${colors.background}

label = %date% %time%
